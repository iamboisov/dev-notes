---
description: Основные строительные блоки скрипта
---

# Функции

Функции позволяют повторять одно и то же действие во многих частях программы с помощью блока кода.

## Объявление функции

Для создания функции ее необходимо объявить.

Пример:

```javascript
function sayHi() {
console.log("Привет")
}
```

{% code overflow="wrap" %}
```javascript
function sayHi(params) { // в скобки идут параметры функции
console.log(params)
}

sayHi("О! Привет") // Чтобы вызвать функцию без ошибок, необходимо поместить аргументы в скобки, так как у нас функция с параметрами
```
{% endcode %}

## Локальные переменные

Переменные, объявленные внутри функции видны только внутри этой функции.

```javascript
function sayHi(params) {
  let x = 5
  console.log(params)
  }
  
sayHi("О! Привет")
console.log(x) // x is not defined
```

## Внешние переменные

У функций есть доступ ко внешним переменным и может изменять из значения.

```javascript
let x = "Привет";

function changeVar(){
x = "Добрый вечер"
console.log(x)
}
```

{% hint style="warning" %}
Если одноимённая переменная объявляется внутри функции, тогда она перекрывает внешнюю.
{% endhint %}

{% hint style="info" %}
Глобальные переменные

Переменные, объявленные снаружи всех функций — называются глобальными. Глобальные переменные видны для всех функций.

Желательно сводить к минимуму использование глобальных переменных. Однако такие переменные могут быть полезными для хранения важных "общепроектных" данных.
{% endhint %}

## Параметры

Мы можем передать внутрь функции любую информацию, используя параметры.

```javascript
function sayHi(params) {
  console.log(params)
  }
  
sayHi("О! Привет")
```

{% hint style="info" %}
Функция всегда получает только копию значения переменной и может модифицировать ее внутри себя
{% endhint %}

Например:

```javascript
function sayHi(params) {
  params = params + ", Пользователь"
  console.log(params)
  }

let x = "Привет"
sayHi(x)
```

{% hint style="success" %}
* Параметр — это переменная, указанная в круглых скобках в объявленной функции.
* Аргумент — это значение, которое передается функции при ее вызове.
{% endhint %}

## Значения по умолчанию

Если при вызове функции аргумент не был указан, то его значением становится `undefined`.

Если есть необходимость задать параметру значение по умолчанию при отсутствии аргумента, то это можно сделать с помощью присвоения `=`.

{% code overflow="wrap" %}
```javascript
function sayHi(param1, param2 = "Пользователь") {
  let result = param1 + ", " + param2;
  console.log(result)
  }
  
sayHi("О! Привет") // Так как мы не указали второй параметр, его значение будет по умолчанию
```
{% endcode %}

На месте значения по умолчанию может быть и более сложная конструкция:

{% code overflow="wrap" %}
```javascript
function anotherFunc() {
    return "Пользователь"
}

function sayHi(param1, param2 = anotherFunc()) {
    let result = param1 + ", " + param2;
    console.log(result)
    }
    
  sayHi("О! Привет")
```
{% endcode %}

{% hint style="info" %}
Использование параметров по умолчанию в старых версиях JavaScript

Ранние версии языка не поддерживали параметры по умолчанию. Поэтому существуют альтернативные способы проверки на `undefined`.

```javascript
function sayHi(param1, param2) {
    if (param2 == undefined) {
        param2 = "Пользователь"
    }
    let result = param1 + ", " + param2;
    console.log(result)
    }
    
// Другой способ c помощью || или ??
function sayHi(param1, param2) {
    param2 = param2 || "Пользователь" // Логическое присваивание ИЛИ
    let result = param1 + ", " + param2;
    console.log(result)
    }
```
{% endhint %}

## Возврат значения

Функция может вернуть результат, который будет передан в вызвавший ее код.

{% hint style="success" %}
Директива `return` может находиться в любом месте тела функции. Как только выполнение доходит до этого места, функция останавливается и значение возвращается в вызвавший ее код.
{% endhint %}

```javascript
function anotherFunc() {
    return "Пользователь"
}

let text = anotherFunc()
console.log(text)
```

{% hint style="info" %}
Результат функции с пустым `return` или без него — `undefined`

```javascript
function doNothing() { /* пусто */ }
console.log( doNothing() === undefined ); // true


// То же самое, что и return undefined
function doNothing() {
  return;
}
console.log( doNothing() === undefined ); // true
```
{% endhint %}

{% hint style="danger" %}
Никогда не переносите строки значения `return`

Для длинного значения в `return` может быть заманчиво разместить его на нескольких отдельны строках:

```javascript
return
 (some + long + expression + or + whatever * f(a) + f(b))
```

Однако код не выполнится, потому что интерпретатор языка поставит `;` после `return`. Таким образом `return` пустой.
{% endhint %}

{% hint style="success" %}
Если мы хотим, чтобы возвращаемое значение занимало несколько строк, нужно начать его на той же строке, что и `return` или хотя бы поставить открывающую скобку.

```javascript
return (
  some + long + expression
  + or +
  whatever * f(a) + f(b)
  )
```
{% endhint %}

## Выбор имени функции

Имя функции должно быть кратким и точным, чтобы наглядно отражать какие действия она выполняет. Как правило используют глагольные префиксы, обозначающие характер функции, после которых следует уточнение. Обычно в командах есть соглашения по выбору префиксов для имен функций.

Функции, начинающиеся с...

* `get` — возвращают значение
* `calc` — вычисляют что-то
* `create` — создают что-то
* `check` — проверяют что-то или возвращают логическое значение

```javascript
showMessage(..)     // показывает сообщение
getAge(..)          // возвращает возраст (получая его каким-то образом)
calcSum(..)         // вычисляет сумму и возвращает результат
createForm(..)      // создаёт форму (и обычно возвращает её)
checkPermission(..) // проверяет доступ, возвращая true/false
```

{% hint style="success" %}
**Одна функция — одно действие**

Функция должна делать только то, что явно подразумевается ее названием и это должно быть одним действием.

Если функция должна делать больше, чем одно действие, то имеет смысл разбить ее на несколько меньших функций. Таким образом код будет более читабельным.
{% endhint %}

